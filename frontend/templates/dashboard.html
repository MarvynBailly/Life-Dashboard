{% extends "base.html" %}

{% block content %}
<div class="dashboard-grid">

    <!-- Row 1: Coding Activity Charts -->
    <div class="card card-half">
        <div class="card-header">
            <div class="card-title">
                <span class="icon">‚è±Ô∏è</span>
                Coding Activity
            </div>
            <span class="card-subtitle">Last 7 days</span>
        </div>
        <div class="card-body">
            <div class="chart-container large" id="chart-coding-activity"></div>
        </div>
    </div>

    <div class="card card-half">
        <div class="card-header">
            <div class="card-title">
                <span class="icon">üìÖ</span>
                Today's Breakdown
            </div>
            <span class="card-subtitle" id="today-total">0 hrs 0 mins</span>
        </div>
        <div class="card-body">
            <div class="timeline-container" id="today-timeline">
                <div class="timeline-header">
                    <div class="timeline-axis">
                        <span>12a</span><span>3a</span><span>6a</span><span>9a</span>
                        <span>12p</span><span>3p</span><span>6p</span><span>9p</span><span>12a</span>
                    </div>
                </div>
                <div class="timeline-rows" id="timeline-rows">
                    <div class="timeline-empty">No activity yet today</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Row 2: Projects & Languages -->
    <div class="card card-half">
        <div class="card-header">
            <div class="card-title">
                <span class="icon">üìÅ</span>
                Projects
            </div>
        </div>
        <div class="card-body">
            <div class="chart-container" id="chart-projects"></div>
            <ul class="stats-list mt-md" id="projects-list"></ul>
        </div>
    </div>

    <div class="card card-half">
        <div class="card-header">
            <div class="card-title">
                <span class="icon">üíª</span>
                Languages
            </div>
        </div>
        <div class="card-body">
            <div class="chart-container" id="chart-languages"></div>
            <ul class="stats-list mt-md" id="languages-list"></ul>
        </div>
    </div>

    <!-- Row 3: Editors & OS -->
    <div class="card card-third">
        <div class="card-header">
            <div class="card-title">
                <span class="icon">üìù</span>
                Editors
            </div>
        </div>
        <div class="card-body">
            <div class="chart-container small" id="chart-editors"></div>
        </div>
    </div>

    <div class="card card-third">
        <div class="card-header">
            <div class="card-title">
                <span class="icon">üñ•Ô∏è</span>
                Operating Systems
            </div>
        </div>
        <div class="card-body">
            <div class="chart-container small" id="chart-os"></div>
        </div>
    </div>

    <div class="card card-third">
        <div class="card-header">
            <div class="card-title">
                <span class="icon">üìä</span>
                Weekly Activity
            </div>
        </div>
        <div class="card-body">
            <div class="heatmap-container" id="weekly-heatmap">
                <!-- Heatmap will be generated here -->
            </div>
        </div>
    </div>

    <!-- Row 3.5: ActivityWatch App Usage -->
    <div class="card card-half">
        <div class="card-header">
            <div class="card-title">
                <span class="icon">üëÅÔ∏è</span>
                App Usage
            </div>
            <span class="card-subtitle">Today</span>
        </div>
        <div class="card-body">
            <div class="chart-container" id="chart-app-usage"></div>
            <ul class="stats-list mt-md" id="app-usage-list"></ul>
        </div>
    </div>

    <div class="card card-half">
        <div class="card-header">
            <div class="card-title">
                <span class="icon">‚è∞</span>
                Screen Time
            </div>
            <span class="card-subtitle" id="aw-active-time">--</span>
        </div>
        <div class="card-body">
            <div class="screen-time-stats">
                <div class="screen-time-item">
                    <div class="screen-time-label">Active Time</div>
                    <div class="screen-time-value text-success" id="aw-active-display">--</div>
                </div>
                <div class="screen-time-item">
                    <div class="screen-time-label">Away (AFK)</div>
                    <div class="screen-time-value text-warning" id="aw-afk-display">--</div>
                </div>
            </div>
            <div class="screen-time-bar mt-md">
                <div class="progress-bar">
                    <div class="progress-bar-fill" id="aw-active-bar" style="width: 0%; background-color: var(--accent-green);"></div>
                </div>
                <div class="screen-time-legend mt-sm">
                    <span class="legend-item"><span class="legend-dot" style="background: var(--accent-green);"></span> Active</span>
                    <span class="legend-item"><span class="legend-dot" style="background: var(--accent-yellow);"></span> AFK</span>
                </div>
            </div>
            <div class="timeline-container mt-md" id="afk-timeline">
                <div class="timeline-header">
                    <div class="timeline-axis">
                        <span>12a</span><span>3a</span><span>6a</span><span>9a</span>
                        <span>12p</span><span>3p</span><span>6p</span><span>9p</span><span>12a</span>
                    </div>
                </div>
                <div class="timeline-rows" id="afk-timeline-rows">
                    <div class="timeline-empty">No data yet today</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Row 3.75: GitHub -->
    <div class="card card-half">
        <div class="card-header">
            <div class="card-title">
                <span class="icon">&#128025;</span>
                GitHub Repos
            </div>
            <span class="card-subtitle">Recently updated</span>
        </div>
        <div class="card-body">
            <div id="chart-github-repos"></div>
        </div>
    </div>

    <div class="card card-half">
        <div class="card-header">
            <div class="card-title">
                <span class="icon">&#128200;</span>
                GitHub Contributions
            </div>
            <span class="card-subtitle" id="github-total-commits">0 commits</span>
        </div>
        <div class="card-body">
            <div class="chart-container large" id="chart-github-contributions"></div>
        </div>
    </div>

</div>
{% endblock %}

{% block scripts %}
<script>
    // Initialize dashboard when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
        initDashboard();
    });
</script>
{% endblock %}
